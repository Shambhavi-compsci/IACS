<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="./assets/style.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <nav class="bg-white shadow">
            <div class="container mx-auto px-6 py-3 flex justify-between items-center">
                <div class="flex items-center space-x-8">
                    <a href="/">
                        <img src="./assets/logo.png" alt="Logo" class="h-8 lg:h-10">
                    </a>
                    <div class="hidden md:flex space-x-4">
                        <a href="index.html" class="hover:text-indigo-600 text-gray-700">Home</a>
                        <a href="welcome.html" class="hover:text-indigo-600 text-gray-700">Shop</a>
                        <a href="service.html" class="hover:text-indigo-600 text-gray-700">Service</a>
                        <a href="contact.html" class="hover:text-indigo-600 text-gray-700">Contact</a>
                    </div>
                </div>
                <div class="flex space-x-4 items-center">
                    <a href="index.html" class="text-gray-800 text-sm">LOGIN</a>
                    <a href="register.html" class="bg-indigo-600 px-4 py-2 rounded text-white hover:bg-indigo-500 text-sm">SIGNUP</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Section -->
    <div class="h-screen bg-gray-100 flex justify-center items-center">
        <div class="py-6 px-8 mt-20 bg-white rounded shadow-xl text-center">
            <!-- Centered and Larger Logo -->
            <img src="./assets/logo.png" alt="Logo" class="h-16 lg:h-24 mx-auto mb-6">
            
            <h2 class="text-2xl font-bold mb-6 text-gray-800">User Login</h2>
            
            <!-- Message for Logged-In Users -->
            <div id="login-status-message" class="hidden mb-6">
                <p class="text-green-600 font-bold">âœ” Already Logged In</p>
                <p class="mt-4">Check out our <a href="service.html" class="text-blue-600 hover:underline">services</a> or <a href="welcome.html" class="text-blue-600 hover:underline">buy more products</a>.</p>
                <p class="mt-4">Or <a href="profile.html" class="text-blue-600 hover:underline">view your profile</a>.</p>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" method="POST" action="/login">
                <div class="mb-6">
                    <label for="username" class="block text-gray-800 font-bold">Username:</label>
                    <input type="text" name="username" id="username" placeholder="Username" class="w-full border border-gray-300 py-2 pl-3 rounded mt-2 outline-none focus:ring-indigo-600" required>
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-gray-800 font-bold">Password:</label>
                    <input type="password" name="password" id="password" placeholder="Password" class="w-full border border-gray-300 py-2 pl-3 rounded mt-2 outline-none focus:ring-indigo-600" required>
                </div>
                <input type="submit" class="cursor-pointer py-2 px-4 bg-indigo-500 text-white font-bold w-full rounded hover:bg-indigo-400" value="LOGIN">
            </form>
            
            <!-- New Registration Link for Logged-Out Users -->
            <div id="registration-link" class="mt-6">
                <a href="register.html" class="text-sm font-thin text-gray-800 hover:underline">Don't have an account yet? <span class="font-bold text-indigo-600 hover:underline">Sign up</span></a>
            </div>
        </div>
    </div>

    <!-- Chatbot Integration -->

    <script
        src="https://www.chatbase.co/embed.min.js"
        chatbotId="ffgHvnSgquEaaZVt5DbPa"
        domain="www.chatbase.co"
        defer
    ></script>

    <!-- Optional JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Fetch login status from the server
            fetch('/check-login-status')
                .then(response => response.json())
                .then(data => {
                    if (data.isLoggedIn) {
                        document.getElementById('login-status-message').classList.remove('hidden');
                        document.getElementById('loginForm').style.display = 'none'; // Hide login form if already logged in
                        document.getElementById('registration-link').style.display = 'none'; // Hide registration link if already logged in
                    }
                })
                .catch(error => console.error('Error checking login status:', error));
        });
    </script>
</body>
</html>
